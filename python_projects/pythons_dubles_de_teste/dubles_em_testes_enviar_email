import smtplib

def mandar_email(fromaddr, toaddrs, msg):
    server = smtplib.SMTP('localhost')
    server.sendmail(fromaddr, toaddrs, msg)
    server.quit()

def test_mandar_email():
    with patch("smtplib.SMTP") as mock_smtp:
        m = mock_smtp("localhost")
        mandar_email("from", "to", "bla bla bla")
        m.sendmail.assert_called_once_with("from", "to", "bla bla bla")



 Que existe um dublê do tipo Mock que serve ao mesmo tempo para programar comportamento esperado e capturar as saídas indiretas para serem usados na verificação do caso de teste
Como usar o dublê Mock para verificar as chamadas das funções que substituiu nos casos de teste e para programar o resultado das mesmas
Como implementar nosso próprio Mock, sem usar a biblioteca unittest.mock
Como implementar Mock com a biblioteca unittest.mock